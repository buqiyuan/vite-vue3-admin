import{_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-B_bz3tPt.js";import{A,_ as B}from"./index-Bf9NpXkZ.js";import{d as C,r as d,b as E,bh as N,I as V,Q as F,R as y,k as o,K as l,_ as x,F as z,ah as L,aD as U,aF as $,aG as G,bE as M,X as P,Y as Q}from"./vendor-D7Y6X7_h.js";const R=c=>(P("data-v-32c9ba37"),c=c(),Q(),c),X={style:{"--border":1},class:"header"},Y=R(()=>y("div",{class:"title"},"组织架构",-1)),j=C({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(c,{emit:g}){const i=g,p=d(""),r=d([]),a=d([]),_=d(!0),m=E(()=>v(N(r.value),p.value)),v=(t,e="")=>t.filter(n=>n.children?.length&&(n.children=v(n.children,e),n.children.length)?!0:n.name?.includes(e)),D=async()=>{r.value=await A.systemDept.deptList({}),a.value=[...a.value,...r.value.map(t=>Number(t.id))],i("init",r.value)},b=t=>{i("select",t[0])},f=(t,e=[])=>t.reduce((n,s)=>(n.push(s.id),s.children?.length&&f(s.children,n),n),e),K=()=>{a.value=f(m.value)},T=t=>{a.value=t,_.value=!1};return D(),(t,e)=>{const n=L,s=S,h=U,k=$,I=G,w=M;return V(),F(z,null,[y("div",X,[Y,o(n,{value:p.value,"onUpdate:value":e[0]||(e[0]=u=>p.value=u),size:"small",placeholder:"搜索"},null,8,["value"]),o(I,null,{overlay:l(()=>[o(k,null,{default:l(()=>[o(h,{onClick:K},{default:l(()=>[x(" 展开全部 ")]),_:1}),o(h,{onClick:e[1]||(e[1]=u=>a.value=[])},{default:l(()=>[x(" 折叠全部 ")]),_:1})]),_:1})]),default:l(()=>[o(s,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),o(w,{expandedKeys:a.value,"onUpdate:expandedKeys":e[2]||(e[2]=u=>a.value=u),"auto-expand-parent":_.value,"tree-data":m.value,"field-names":{key:"id",title:"name"},onSelect:b,onExpand:T},null,8,["expandedKeys","auto-expand-parent","tree-data"])],64)}}}),O=B(j,[["__scopeId","data-v-32c9ba37"]]);export{O as default};
