import{d as v,n as y,I as b,Q as w,k as a,K as o,B as p,R as c,_ as x,ag as C,aS as S,b8 as k,ak as z,b9 as B,X as U,Y as A,a9 as N,a5 as O,ba as R,a0 as i,a1 as V}from"./vendor-D7Y6X7_h.js";import{_ as M}from"./logo-DigeLpG8.js";import{b as T,c as q,f as E,A as F,o as K,_ as L}from"./index-Bf9NpXkZ.js";const Q=d=>(U("data-v-13205d4b"),d=d(),A(),d),X={class:"login-box"},Y=Q(()=>c("div",{class:"login-logo"},[c("img",{src:M,width:"45"}),c("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antd Admin")],-1)),j=["src"],D=v({__name:"index",setup(d){const e=y({loading:!1,captcha:"",formInline:{username:"admin",password:"a123456",verifyCode:"",captchaId:""}}),m=T(),f=q(),_=E(),u=async()=>{const n=await F.captcha.captchaCaptchaByImg({width:100,height:50});e.captcha=n.img,e.formInline.captchaId=n.id};u();const g=async()=>{const{username:n,password:t,verifyCode:r}=e.formInline;if(n.trim()==""||t.trim()=="")return i.warning("用户名或密码不能为空！");if(!r)return i.warning("请输入验证码！");i.loading("登录中...",0),e.loading=!0,e.formInline;const[s]=await K(_.login(e.formInline));s?(V.error({title:()=>"提示",content:()=>s.message}),u()):(i.success("登录成功！"),setTimeout(()=>f.replace(m.query.redirect??"/"))),e.loading=!1,i.destroy()};return(n,t)=>{const r=S,s=k,h=z("a-button"),I=B;return b(),w("div",X,[Y,a(I,{layout:"horizontal",model:e.formInline,onSubmit:C(g,["prevent"])},{default:o(()=>[a(s,null,{default:o(()=>[a(r,{value:e.formInline.username,"onUpdate:value":t[0]||(t[0]=l=>e.formInline.username=l),size:"large",placeholder:"admin"},{prefix:o(()=>[a(p(N),{type:"user"})]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(r,{value:e.formInline.password,"onUpdate:value":t[1]||(t[1]=l=>e.formInline.password=l),size:"large",type:"password",placeholder:"a123456",autocomplete:"new-password"},{prefix:o(()=>[a(p(O),{type:"user"})]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(r,{value:e.formInline.verifyCode,"onUpdate:value":t[2]||(t[2]=l=>e.formInline.verifyCode=l),placeholder:"验证码",maxlength:4,size:"large"},{prefix:o(()=>[a(p(R))]),suffix:o(()=>[c("img",{src:e.captcha,class:"absolute right-0 h-full cursor-pointer",onClick:u},null,8,j)]),_:1},8,["value"])]),_:1}),a(s,null,{default:o(()=>[a(h,{type:"primary","html-type":"submit",size:"large",loading:e.loading,block:""},{default:o(()=>[x(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),P=L(D,[["__scopeId","data-v-13205d4b"]]);export{P as default};
