import{w as I,h as C,c as T}from"./index-Bf9NpXkZ.js";import{k as o,aX as g,bs as w,d as v,r as M,bn as b,F as S,g as j,a as F,I as O,Q as E,K as r,_ as d,B as i,ak as N,bd as R,bb as V}from"./vendor-D7Y6X7_h.js";import{u as q,c as A}from"./dynamic-table-CtWW4hiU.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-BrXY2i5o.js";import{a as D}from"./hero-DVIKmiW9.js";import{c as P,d as h}from"./createContextMenu-BYsesM0V.js";import{a as B,j as K}from"./index-BnL0icdV.js";import"./index.vue_vue_type_style_index_0_lang-reX62h1K.js";import{u as L}from"./useFormModal-DrjhP41g.js";import"./schema-form.vue_vue_type_script_setup_true_lang-BWF4-paj.js";import"./is-CBsgbGQ7.js";import"./index-DKcumURF.js";import"./dateUtil-ohqk8BGA.js";import"./index-DaE14gLf.js";import"./Icon.vue_vue_type_script_setup_true_lang-B_bz3tPt.js";import"./useModal-p6LRjO4c.js";function X(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!w(e)}const $=v({props:{record:Object},setup(e){const a=M(!1);return()=>o(S,null,[o(b,{src:e.record?.avatar,preview:{visible:!1},onClick:()=>a.value=!0},null),o("div",{hidden:!0},[o(b.PreviewGroup,{preview:{visible:a.value,onVisibleChange:l=>a.value=l}},{default:()=>[e.record?.posters.map(l=>o(b,{src:l,key:l},null))]})])])}}),y=[{title:"头像",width:100,hideInSearch:!0,dataIndex:"avatar",customRender:({record:e})=>o($,{record:e,key:e.avatar},null)},{title:"英雄名称",dataIndex:"title"},{title:"英雄称号",dataIndex:"name"},{title:"定位",dataIndex:"roles",customRender:({record:e})=>o("div",null,[e.roles?.map(a=>o(g,{color:"blue",key:a},X(a)?a:{default:()=>[a]}))])},{title:"操作",width:120,dataIndex:"ACTION",actions:({record:e})=>[{label:"查看详情",onClick:()=>I.push({name:"demos-table-lol-info",params:{id:e.heroId}})}]}];function z(e=!0){return j()&&e&&F(()=>{h()}),[P,h]}const G=e=>[{field:"filename",component:"Input",label:e("component.excel.fileName"),rules:[{required:!0}]},{field:"bookType",component:"Select",label:e("component.excel.fileType"),defaultValue:"xlsx",rules:[{required:!0}],componentProps:{options:[{label:"xlsx",value:"xlsx",key:"xlsx"},{label:"html",value:"html",key:"html"},{label:"csv",value:"csv",key:"csv"},{label:"txt",value:"txt",key:"txt"}]}}],H=()=>{const{t:e}=C(),[a]=L();return{openModal:({onOk:m})=>{a({modalProps:{title:e("component.excel.exportModalTitle"),onFinish:async p=>{const{filename:x,bookType:c}=p;m({filename:`${x.split(".").shift()}.${c}`,bookType:c})}},formProps:{labelWidth:100,schemas:G(e)}})}}},ue=v({name:"DemosTablesLolTable",__name:"index",setup(e){const[a,l]=q(),m=T(),[p]=z(),x=H(),c=()=>{const n=y.filter(t=>!A.includes(t.dataIndex)),s=n.map(t=>t.dataIndex);B({data:l.tableData.map(t=>s.reduce((f,u)=>(f[u]=Array.isArray(t[u])?t[u].toString():t[u],f),{})).map(t=>Object.values(t)),header:n.map(t=>t.title),filename:"二维数组方式导出excel.xlsx"})},_=()=>{x.openModal({onOk:({filename:n,bookType:s})=>{K({data:l.tableData,filename:n,write2excelOpts:{bookType:s}})}})},k=n=>({onContextmenu:s=>{p({event:s,items:[{label:"查看",handler:()=>{m.push({name:"demos-table-lol-info",params:{id:n.heroId}})}},{label:"编辑",handler:()=>{}}]})}});return(n,s)=>{const t=N("a-button");return O(),E("div",null,[o(i(R),{message:"游戏介绍",type:"info","show-icon":""},{description:r(()=>[d(" 英雄联盟 -- 根据数组格式的数据进行导出 ")]),_:1}),o(i(V),{title:"英雄列表mock数据",style:{"margin-top":"20px"}},{default:r(()=>[o(i(a),{size:"small",bordered:"","data-request":i(D),columns:i(y),"row-key":"heroid","export-file-name":"英雄联盟","custom-row":k},{"export-button":r(()=>[o(t,{type:"primary"},{default:r(()=>[d("表格自带导出")]),_:1})]),toolbar:r(()=>[o(t,{type:"primary",onClick:c},{default:r(()=>[d(" 数组格式导出 ")]),_:1}),o(t,{type:"primary",onClick:_},{default:r(()=>[d(" 自定义导出格式 ")]),_:1})]),_:1},8,["data-request","columns"])]),_:1})])}}});export{ue as default};
