import{g as c,f as b,t as S}from"./columns-B4tcRupp.js";import{k as o,bm as _,_ as d,bn as x,bo as C,aX as k,d as T,r as R,b as E,a0 as h,I as q,Q as F,K as l,B as s,bd as O,bi as p,bb as V}from"./vendor-D7Y6X7_h.js";import{u as U}from"./dynamic-table-CtWW4hiU.js";import"./index-Bf9NpXkZ.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-BrXY2i5o.js";import{w as g}from"./common-BRsV2ZKK.js";import"./schema-form.vue_vue_type_script_setup_true_lang-BWF4-paj.js";import"./is-CBsgbGQ7.js";import"./index-DKcumURF.js";import"./dateUtil-ohqk8BGA.js";import"./index-DaE14gLf.js";import"./Icon.vue_vue_type_script_setup_true_lang-B_bz3tPt.js";const j=[{title:"姓名",dataIndex:"name",sorter:!0,defaultEditable:!0,editable:({index:e})=>e>0,formItemProps:{defaultValue:"李白",rules:[{required:!0,message:"请输入姓名"}]},editFormItemProps:{extendSearchFormProps:!1,rules:[{required:!0,message:"请输入姓名"}]}},{title:"性别",dataIndex:"gender",formItemProps:{component:"Select",componentProps:({formInstance:e,formModel:a})=>({options:[{label:"男",value:1},{label:"女",value:0}],onChange(){e?.updateSchema({field:"clothes",componentProps:{options:c(a.gender)}}),a.clothes=""}})},editFormItemProps:{extendSearchFormProps:!0,rules:[{required:!0,type:"number",message:"请选择性别"}],componentProps:({formInstance:e,formModel:a,tableRowKey:n})=>({onChange(){e?.updateSchema({field:`${n}.clothes`,componentProps:{options:c(a.gender)}}),a.clothes=""}})},customRender:({record:e})=>["女","男"][e.gender]},{title:"衣服",dataIndex:"clothes",formItemProps:{component:"Select",componentProps:({formModel:e})=>({options:c(e.gender)})}},{title:"图片",dataIndex:"img",hideInSearch:!0,formItemProps:{component:"Upload",defaultValue:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],componentProps:{maxCount:1,listType:"picture-card",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},componentSlots:({formModel:e})=>({default:()=>e.img?.length?"":o("div",null,[o(_,null,null),o("div",{class:"mt-8px"},[d("Upload")])])})},customRender:({record:e})=>o(x,{width:100,src:e.img},null)},{title:"价格",dataIndex:"price",editFormItemProps:{component:"InputNumber",rules:[{required:!0,message:"请输入价格！"}]},customRender:({record:e})=>`${e.price}元`},{title:"状态",dataIndex:"status",formItemProps:{component:"Select",componentProps:({formInstance:e,schema:a})=>({showSearch:!0,filterOption:!1,request:()=>b(),onSearch:C(async n=>{a.value.loading=!0;const r={field:a.value.field,componentProps:{options:[]}};e?.updateSchema([r]);const m=await b(n).finally(()=>a.value.loading=!1);r.componentProps.options=m,e?.updateSchema([r])},500),onChange(n){}})},editFormItemProps:{rules:[{required:!0,type:"number",message:"请选择状态"}]},customRender:({record:e})=>o(k,{color:e.status==1?"red":"default"},{default:()=>[["已售罄","热卖中"][e.status]]})}],X=T({name:"EditRowTable",__name:"index",setup(e){const[a]=U(),n=R("cell"),r=async t=>(await g(500),{...t,items:S}),m=E(()=>[...j,{title:"操作",hideInTable:n.value==="cell",width:200,dataIndex:"ACTION",actions:({record:t},i)=>{const{startEditable:u,cancelEditable:f,isEditable:y,getEditFormModel:P,validateRow:I}=i;return y(t.id)?[{label:"保存",onClick:async()=>{await I(t.id),h.loading({content:"保存中...",key:t.id}),P(t.id),await g(2e3),f(t.id),h.success({content:"保存成功!",key:t.id,duration:2})}},{label:"取消",onClick:()=>{f(t.id)}}]:[{label:"编辑",onClick:()=>{u(t.id,t)}}]}}]),v=(t,i,u)=>{},w=async(t,i,u)=>{await g(2e3)};return(t,i)=>(q(),F("div",null,[o(s(O),{message:"可编辑行表格",type:"info","show-icon":""},{description:l(()=>[d(" 可编辑行表格-可编辑行表格使用示例 ")]),_:1}),o(s(V),{title:"可编辑行表格基本使用示例",style:{"margin-top":"20px"}},{default:l(()=>[o(s(a),{size:"small",bordered:"","data-request":r,columns:m.value,"editable-type":n.value,"on-save":w,"on-cancel":v,"row-key":"id"},{toolbar:l(()=>[o(s(p),{ref:"select",value:n.value,"onUpdate:value":i[0]||(i[0]=u=>n.value=u)},{default:l(()=>[o(s(p).Option,{value:"single"},{default:l(()=>[d("单行编辑")]),_:1}),o(s(p).Option,{value:"multiple"},{default:l(()=>[d("多行编辑")]),_:1}),o(s(p).Option,{value:"cell"},{default:l(()=>[d("可编辑单元格")]),_:1})]),_:1},8,["value"])]),_:1},8,["columns","editable-type"])]),_:1})]))}});export{X as default};
