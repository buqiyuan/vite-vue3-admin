import{f as m}from"./dateUtil-ohqk8BGA.js";import{K as P,A as k}from"./index-Bf9NpXkZ.js";import{k as s,aa as B,aX as i,b0 as M,bs as N,d as V,bj as j,r,b as O,w as T,I as v,Q as h,K as f,B as w,a8 as q,R as I,F as D,a0 as _,a1 as E,bm as F,bM as G}from"./vendor-D7Y6X7_h.js";function J(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!N(t)}const g=t=>/^https?:\/\//.test(t)?t:P+t,$=[{title:"头像",width:80,dataIndex:"avatar",hideInSearch:!0,customRender:({record:t})=>s(B,{src:g(t.avatar)},null)},{title:"用户名",width:120,dataIndex:"username"},{title:"呢称",width:120,hideInSearch:!0,dataIndex:"nickname"},{title:"所在部门",dataIndex:"dept",hideInSearch:!0,width:180,customRender:({record:t})=>s(i,null,{default:()=>[t.dept?.name]})},{title:"所属角色",dataIndex:"roleNames",hideInSearch:!0,width:220,customRender:({record:t})=>{let a;return s(M,null,J(a=t.roles.map(n=>s(i,{color:"success",key:n.id},{default:()=>[n.name]})))?a:{default:()=>[a]})}},{title:"邮箱",width:120,dataIndex:"email"},{title:"手机",width:120,dataIndex:"phone"},{title:"备注",width:120,dataIndex:"remark"},{title:"状态",dataIndex:"status",width:100,hideInSearch:!0,formItemProps:{component:"Select",componentProps:{options:[{label:"启用",value:1},{label:"禁用",value:0}]}},customRender:({record:t})=>{const a=~~t.status===1;return s(i,{color:a?"success":"red"},{default:()=>[a?"启用":"禁用"]})}},{title:"创建时间",dataIndex:"createdAt",width:120,hideInSearch:!0,customRender:({record:t})=>m(t.createdAt)},{title:"修改时间",dataIndex:"updatedAt",width:120,hideInSearch:!0,customRender:({record:t})=>m(t.createdAt)}],K={key:0},L=I("div",{style:{"margin-top":"8px"}},"Upload",-1),z=["src"],H=V({name:"AvatarUpload",inheritAttrs:!1,__name:"AvatarUpload",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(t){const a=j(t,"value"),n=r([]),u=r(!1),c=r(""),d=r(""),p=O(()=>g(a.value)),b=T(a,e=>{e&&!n.value.length&&(n.value=[{uid:`vc-upload-${Date.now()}-1`,name:e.split("/").at(-1),status:"done",url:p.value}],b())}),x=e=>{const l=e.type==="image/jpeg"||e.type==="image/png";l||_.error("You can only upload JPG/PNG file!");const o=e.size/1024/1024<2;return o||_.error("Image must smaller than 2MB!"),l&&o},y=async e=>{const{filename:l}=await k.toolsUpload.uploadUpload({file:e});a.value=l},A=async e=>{await y(e.file)},S=({file:e})=>{e.status="done",n.value=[e]},R=e=>{a.value="",n.value=[]},U=()=>{u.value=!1,d.value=""},C=async e=>{!e.url&&!e.preview&&(e.preview=p.value),c.value=e.url||e.preview,u.value=!0,d.value=e.name||e.url.substring(e.url.lastIndexOf("/")+1)};return(e,l)=>{const o=E;return v(),h(D,null,[s(w(G),{"file-list":n.value,name:"avatar","list-type":"picture-card",class:"min-h-[110px]","custom-request":A,onBeforeUpload:x,onChange:S,onRemove:R,onPreview:C},{default:f(()=>[n.value.length<1?(v(),h("div",K,[s(w(F)),L])):q("",!0)]),_:1},8,["file-list"]),s(o,{open:u.value,title:d.value,footer:null,onCancel:U},{default:f(()=>[I("img",{alt:"example",style:{width:"100%"},src:c.value},null,8,z)]),_:1},8,["open","title"])],64)}}});export{H as _,$ as b};
