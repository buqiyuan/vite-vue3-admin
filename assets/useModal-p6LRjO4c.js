import{d as w,r as f,b as C,B as c,bw as g,w as h,bz as P,k as b,bs as x,g as O,M as j,x as y,bA as _}from"./vendor-D7Y6X7_h.js";import{_ as k}from"./index.vue_vue_type_style_index_0_lang-reX62h1K.js";function V(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!x(n)}const M=w({props:{content:{type:[String,Function]},closeModal:Function,open:Boolean},setup(n,{attrs:a,expose:m}){const r=f(!1),l=f({...a,...n}),s=C(()=>({...a,...n,...c(l)})),u=C(()=>{const e=c(s);return{...g(e,["onCancel","onOk","closeModal","content"]),open:e.open,confirmLoading:r.value,onCancel:o,onOk:t}}),d=e=>{l.value.open=e},i=e=>{l.value={...c(s),...e}};h(()=>l.value.open,e=>{Object.is(e,!1)&&n.closeModal?.()});const t=async e=>{r.value=!0;try{await c(s)?.onOk?.(e),d(!1)}catch(p){return Promise.reject(p)}finally{r.value=!1}},o=async e=>{await c(s)?.onCancel?.(e),d(!1)};return m({setProps:i}),()=>{const e=c(s),{content:p}=e,v=P(p)?p():p;return b(k,c(u),V(v)?v:{default:()=>[v]})}}}),R=()=>{let n;const a=f(),m=O()?.appContext,r=f(!1),l=async()=>{if(await y(),r.value&&a.value)return a.value;if(n)return n;const t=document.createElement("div"),o=b(M);return o.appContext=m,_(o,t),n=o.component,n.props.closeModal=u,n},s=async t=>{const o=await l();Object.is(o,a.value)?o?.setProps?.(t):o?.exposed?.setProps?.(t)},u=()=>{s({open:!1})},d=async t=>{s({...t,closeModal:u,open:!0}),await y()},i=(t,{attrs:o,slots:e})=>(r.value=!0,b(M,j({ref:a},{...o,...t}),e));return i.show=d,i.hide=u,i.setProps=s,[i,a]};export{R as u};
